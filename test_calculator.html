<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–¢–µ—Å—Ç –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; border-radius: 5px; }
    .test-result { margin: 10px 0; padding: 10px; border-radius: 3px; }
    .success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
    .error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
    .info { background-color: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
    button { padding: 10px 20px; margin: 5px; background: #007bff; color: white; border: none; border-radius: 3px; cursor: pointer; }
    button:hover { background: #0056b3; }
  </style>
</head>
<body>
  <h1>üß™ –¢–µ—Å—Ç –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ –∫–∞—Ä–∫–∞—Å–Ω—ã—Ö —Å—Ç—Ä–æ–µ–Ω–∏–π</h1>
  
  <div class="test-section">
    <h2>1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</h2>
    <button onclick="testPageLoad()">–¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏</button>
    <div id="pageLoadResult"></div>
  </div>

  <div class="test-section">
    <h2>2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏</h2>
    <button onclick="testAuth()">–¢–µ—Å—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏</button>
    <div id="authResult"></div>
  </div>

  <div class="test-section">
    <h2>3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –ª–∏–Ω–µ–π–∫–∏</h2>
    <button onclick="testStandardLine()">–¢–µ—Å—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –ª–∏–Ω–µ–π–∫–∏</button>
    <div id="standardResult"></div>
  </div>

  <div class="test-section">
    <h2>4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —ç–∫–æ–Ω–æ–º-–ª–∏–Ω–µ–π–∫–∏</h2>
    <button onclick="testEconomyLine()">–¢–µ—Å—Ç —ç–∫–æ–Ω–æ–º-–ª–∏–Ω–µ–π–∫–∏</button>
    <div id="economyResult"></div>
  </div>

  <div class="test-section">
    <h2>5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–≥–æ—Ä–æ–¥–æ–∫</h2>
    <button onclick="testPartitions()">–¢–µ—Å—Ç –ø–µ—Ä–µ–≥–æ—Ä–æ–¥–æ–∫</button>
    <div id="partitionsResult"></div>
  </div>

  <div class="test-section">
    <h2>6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫–æ–Ω/–¥–≤–µ—Ä–µ–π</h2>
    <button onclick="testWindowsDoors()">–¢–µ—Å—Ç –æ–∫–æ–Ω/–¥–≤–µ—Ä–µ–π</button>
    <div id="windowsResult"></div>
  </div>

  <div class="test-section">
    <h2>7. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∏</h2>
    <button onclick="testDelivery()">–¢–µ—Å—Ç –¥–æ—Å—Ç–∞–≤–∫–∏</button>
    <div id="deliveryResult"></div>
  </div>

  <div class="test-section">
    <h2>8. –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç</h2>
    <button onclick="runFullTest()">–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã</button>
    <div id="fullTestResult"></div>
  </div>

  <script>
    let testResults = [];

    function addResult(section, message, type = 'info') {
      const result = { section, message, type, timestamp: new Date().toLocaleTimeString() };
      testResults.push(result);
      
      const div = document.getElementById(section + 'Result');
      div.innerHTML += `<div class="test-result ${type}">[${result.timestamp}] ${message}</div>`;
    }

    function testPageLoad() {
      addResult('pageLoad', '–ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥—Ä—É–∑–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã...', 'info');
      
      try {
        const iframe = document.querySelector('iframe');
        if (!iframe || !iframe.contentDocument) {
          addResult('pageLoad', '‚ùå Iframe —Å –æ—Å–Ω–æ–≤–Ω—ã–º –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–º –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω', 'error');
          return;
        }
        
        const iframeDoc = iframe.contentDocument;
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
        const requiredElements = [
          'selType', 'inpWidth', 'inpLength', 'btnCalc', 'out',
          'selInsul', 'selRoofMat', 'selInRep', 'selOutRep'
        ];
        
        let missingElements = [];
        requiredElements.forEach(id => {
          if (!iframeDoc.getElementById(id)) {
            missingElements.push(id);
          }
        });
        
        if (missingElements.length === 0) {
          addResult('pageLoad', '‚úÖ –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞–π–¥–µ–Ω—ã', 'success');
        } else {
          addResult('pageLoad', `‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç —ç–ª–µ–º–µ–Ω—Ç—ã: ${missingElements.join(', ')}`, 'error');
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
        if (iframe.contentWindow && typeof iframe.contentWindow.CONFIG !== 'undefined') {
          addResult('pageLoad', '‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è CONFIG –∑–∞–≥—Ä—É–∂–µ–Ω–∞', 'success');
        } else {
          addResult('pageLoad', '‚ùå –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è CONFIG –Ω–µ –Ω–∞–π–¥–µ–Ω–∞', 'error');
        }
        
      } catch (error) {
        addResult('pageLoad', `‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
      }
    }

    function testAuth() {
      addResult('auth', '–ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é...', 'info');
      
      try {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        const authContainer = document.getElementById('auth-container');
        const calcContainer = document.getElementById('calc-container');
        
        if (authContainer && calcContainer) {
          addResult('auth', '‚úÖ –≠–ª–µ–º–µ–Ω—Ç—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–∞–π–¥–µ–Ω—ã', 'success');
          
          // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é authenticate
          if (typeof authenticate === 'function') {
            addResult('auth', '‚úÖ –§—É–Ω–∫—Ü–∏—è authenticate –Ω–∞–π–¥–µ–Ω–∞', 'success');
          } else {
            addResult('auth', '‚ùå –§—É–Ω–∫—Ü–∏—è authenticate –Ω–µ –Ω–∞–π–¥–µ–Ω–∞', 'error');
          }
        } else {
          addResult('auth', '‚ùå –≠–ª–µ–º–µ–Ω—Ç—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã', 'error');
        }
      } catch (error) {
        addResult('auth', `‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
      }
    }

    function testStandardLine() {
      addResult('standard', '–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –ª–∏–Ω–µ–π–∫—É...', 'info');
      
      try {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∏–ø—ã —Å—Ç—Ä–æ–µ–Ω–∏–π
        const selType = document.getElementById('selType');
        if (selType) {
          const options = Array.from(selType.options).map(opt => opt.value);
          const standardTypes = ['hoblok', 'bytovka', 'house'];
          
          let foundStandard = standardTypes.filter(type => options.includes(type));
          if (foundStandard.length === standardTypes.length) {
            addResult('standard', '‚úÖ –í—Å–µ —Ç–∏–ø—ã —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –ª–∏–Ω–µ–π–∫–∏ –Ω–∞–π–¥–µ–Ω—ã', 'success');
          } else {
            addResult('standard', `‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω—ã —Ç–∏–ø—ã: ${standardTypes.filter(t => !foundStandard.includes(t)).join(', ')}`, 'error');
          }
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–µ—Ä–µ–≥–æ—Ä–æ–¥–∫–∏
        const selPartitionType = document.getElementById('selPartitionType');
        if (selPartitionType) {
          addResult('standard', '‚úÖ –°–µ–ª–µ–∫—Ç –ø–µ—Ä–µ–≥–æ—Ä–æ–¥–æ–∫ –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –ª–∏–Ω–µ–π–∫–∏ –Ω–∞–π–¥–µ–Ω', 'success');
        } else {
          addResult('standard', '‚ùå –°–µ–ª–µ–∫—Ç –ø–µ—Ä–µ–≥–æ—Ä–æ–¥–æ–∫ –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –ª–∏–Ω–µ–π–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–≤–∞–∏
        const selSvaiType = document.getElementById('selSvaiType');
        if (selSvaiType) {
          addResult('standard', '‚úÖ –°–µ–ª–µ–∫—Ç —Å–≤–∞–π –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –ª–∏–Ω–µ–π–∫–∏ –Ω–∞–π–¥–µ–Ω', 'success');
        } else {
          addResult('standard', '‚ùå –°–µ–ª–µ–∫—Ç —Å–≤–∞–π –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –ª–∏–Ω–µ–π–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
        }
        
      } catch (error) {
        addResult('standard', `‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
      }
    }

    function testEconomyLine() {
      addResult('economy', '–ü—Ä–æ–≤–µ—Ä—è–µ–º —ç–∫–æ–Ω–æ–º-–ª–∏–Ω–µ–π–∫—É...', 'info');
      
      try {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∏–ø—ã —ç–∫–æ–Ω–æ–º-–ª–∏–Ω–µ–π–∫–∏
        const selType = document.getElementById('selType');
        if (selType) {
          const options = Array.from(selType.options).map(opt => opt.value);
          const economyTypes = ['hoblok_economy', 'bytovka_economy'];
          
          let foundEconomy = economyTypes.filter(type => options.includes(type));
          if (foundEconomy.length === economyTypes.length) {
            addResult('economy', '‚úÖ –í—Å–µ —Ç–∏–ø—ã —ç–∫–æ–Ω–æ–º-–ª–∏–Ω–µ–π–∫–∏ –Ω–∞–π–¥–µ–Ω—ã', 'success');
          } else {
            addResult('economy', `‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω—ã —Ç–∏–ø—ã: ${economyTypes.filter(t => !foundEconomy.includes(t)).join(', ')}`, 'error');
          }
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–µ—Ä–µ–≥–æ—Ä–æ–¥–∫–∏ —ç–∫–æ–Ω–æ–º-–ª–∏–Ω–µ–π–∫–∏
        const partitionsContainer = document.getElementById('partitionsContainerEconomy');
        if (partitionsContainer) {
          addResult('economy', '‚úÖ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–µ—Ä–µ–≥–æ—Ä–æ–¥–æ–∫ —ç–∫–æ–Ω–æ–º-–ª–∏–Ω–µ–π–∫–∏ –Ω–∞–π–¥–µ–Ω', 'success');
        } else {
          addResult('economy', '‚ùå –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–µ—Ä–µ–≥–æ—Ä–æ–¥–æ–∫ —ç–∫–æ–Ω–æ–º-–ª–∏–Ω–µ–π–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–≤–∞–∏ —ç–∫–æ–Ω–æ–º-–ª–∏–Ω–µ–π–∫–∏
        const selEconomySvaiType = document.getElementById('selEconomySvaiType');
        if (selEconomySvaiType) {
          addResult('economy', '‚úÖ –°–µ–ª–µ–∫—Ç —Å–≤–∞–π –¥–ª—è —ç–∫–æ–Ω–æ–º-–ª–∏–Ω–µ–π–∫–∏ –Ω–∞–π–¥–µ–Ω', 'success');
        } else {
          addResult('economy', '‚ùå –°–µ–ª–µ–∫—Ç —Å–≤–∞–π –¥–ª—è —ç–∫–æ–Ω–æ–º-–ª–∏–Ω–µ–π–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
        }
        
      } catch (error) {
        addResult('economy', `‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
      }
    }

    function testPartitions() {
      addResult('partitions', '–ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–µ—Ä–µ–≥–æ—Ä–æ–¥–∫–∏...', 'info');
      
      try {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º PART_TITLE –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –ª–∏–Ω–µ–π–∫–∏
        if (typeof PART_TITLE !== 'undefined') {
          addResult('partitions', '‚úÖ PART_TITLE –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –ª–∏–Ω–µ–π–∫–∏ –Ω–∞–π–¥–µ–Ω', 'success');
        } else {
          addResult('partitions', '‚ùå PART_TITLE –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –ª–∏–Ω–µ–π–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º PART –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –ª–∏–Ω–µ–π–∫–∏
        if (typeof PART !== 'undefined') {
          addResult('partitions', '‚úÖ PART –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –ª–∏–Ω–µ–π–∫–∏ –Ω–∞–π–¥–µ–Ω', 'success');
        } else {
          addResult('partitions', '‚ùå PART –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –ª–∏–Ω–µ–π–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º ECONOMY_EXTRAS –¥–ª—è —ç–∫–æ–Ω–æ–º-–ª–∏–Ω–µ–π–∫–∏
        if (typeof ECONOMY_EXTRAS !== 'undefined' && ECONOMY_EXTRAS.partitions) {
          addResult('partitions', '‚úÖ ECONOMY_EXTRAS.partitions –¥–ª—è —ç–∫–æ–Ω–æ–º-–ª–∏–Ω–µ–π–∫–∏ –Ω–∞–π–¥–µ–Ω', 'success');
        } else {
          addResult('partitions', '‚ùå ECONOMY_EXTRAS.partitions –¥–ª—è —ç–∫–æ–Ω–æ–º-–ª–∏–Ω–µ–π–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
        }
        
      } catch (error) {
        addResult('partitions', `‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
      }
    }

    function testWindowsDoors() {
      addResult('windows', '–ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–∫–Ω–∞/–¥–≤–µ—Ä–∏...', 'info');
      
      try {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –æ–∫–æ–Ω/–¥–≤–µ—Ä–µ–π
        const windowsContainer = document.getElementById('windowsContainer');
        const windowsContainerEconomy = document.getElementById('windowsContainerEconomy');
        
        if (windowsContainer) {
          addResult('windows', '‚úÖ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ–∫–æ–Ω/–¥–≤–µ—Ä–µ–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –ª–∏–Ω–µ–π–∫–∏ –Ω–∞–π–¥–µ–Ω', 'success');
        } else {
          addResult('windows', '‚ùå –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ–∫–æ–Ω/–¥–≤–µ—Ä–µ–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –ª–∏–Ω–µ–π–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
        }
        
        if (windowsContainerEconomy) {
          addResult('windows', '‚úÖ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ–∫–æ–Ω/–¥–≤–µ—Ä–µ–π —ç–∫–æ–Ω–æ–º-–ª–∏–Ω–µ–π–∫–∏ –Ω–∞–π–¥–µ–Ω', 'success');
        } else {
          addResult('windows', '‚ùå –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ–∫–æ–Ω/–¥–≤–µ—Ä–µ–π —ç–∫–æ–Ω–æ–º-–ª–∏–Ω–µ–π–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —à–∞–±–ª–æ–Ω—ã
        const tmplWindowRow = document.getElementById('tmplWindowRow');
        const tmplWindowRowEconomy = document.getElementById('tmplWindowRowEconomy');
        
        if (tmplWindowRow) {
          addResult('windows', '‚úÖ –®–∞–±–ª–æ–Ω –æ–∫–æ–Ω/–¥–≤–µ—Ä–µ–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –ª–∏–Ω–µ–π–∫–∏ –Ω–∞–π–¥–µ–Ω', 'success');
        } else {
          addResult('windows', '‚ùå –®–∞–±–ª–æ–Ω –æ–∫–æ–Ω/–¥–≤–µ—Ä–µ–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –ª–∏–Ω–µ–π–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
        }
        
        if (tmplWindowRowEconomy) {
          addResult('windows', '‚úÖ –®–∞–±–ª–æ–Ω –æ–∫–æ–Ω/–¥–≤–µ—Ä–µ–π —ç–∫–æ–Ω–æ–º-–ª–∏–Ω–µ–π–∫–∏ –Ω–∞–π–¥–µ–Ω', 'success');
        } else {
          addResult('windows', '‚ùå –®–∞–±–ª–æ–Ω –æ–∫–æ–Ω/–¥–≤–µ—Ä–µ–π —ç–∫–æ–Ω–æ–º-–ª–∏–Ω–µ–π–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
        }
        
      } catch (error) {
        addResult('windows', `‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
      }
    }

    function testDelivery() {
      addResult('delivery', '–ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç–∞–≤–∫—É...', 'info');
      
      try {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –¥–æ—Å—Ç–∞–≤–∫–∏
        const inpAddr = document.getElementById('inpAddr');
        const btnClearAddr = document.getElementById('btnClearAddr');
        const kmInfo = document.getElementById('kmInfo');
        
        if (inpAddr && btnClearAddr && kmInfo) {
          addResult('delivery', '‚úÖ –≠–ª–µ–º–µ–Ω—Ç—ã –¥–æ—Å—Ç–∞–≤–∫–∏ –Ω–∞–π–¥–µ–Ω—ã', 'success');
        } else {
          addResult('delivery', '‚ùå –ù–µ –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–æ—Å—Ç–∞–≤–∫–∏ –Ω–∞–π–¥–µ–Ω—ã', 'error');
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞—Ä—Ç—É
        const map = document.getElementById('map');
        if (map) {
          addResult('delivery', '‚úÖ –≠–ª–µ–º–µ–Ω—Ç –∫–∞—Ä—Ç—ã –Ω–∞–π–¥–µ–Ω', 'success');
        } else {
          addResult('delivery', '‚ùå –≠–ª–µ–º–µ–Ω—Ç –∫–∞—Ä—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏
        if (typeof clearDelivery === 'function') {
          addResult('delivery', '‚úÖ –§—É–Ω–∫—Ü–∏—è clearDelivery –Ω–∞–π–¥–µ–Ω–∞', 'success');
        } else {
          addResult('delivery', '‚ùå –§—É–Ω–∫—Ü–∏—è clearDelivery –Ω–µ –Ω–∞–π–¥–µ–Ω–∞', 'error');
        }
        
      } catch (error) {
        addResult('delivery', `‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
      }
    }

    function runFullTest() {
      addResult('fullTest', 'üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º –ø–æ–ª–Ω—ã–π —Ç–µ—Å—Ç...', 'info');
      
      // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
      testResults = [];
      document.querySelectorAll('[id$="Result"]').forEach(el => el.innerHTML = '');
      
      // –ó–∞–ø—É—Å–∫–∞–µ–º –≤—Å–µ —Ç–µ—Å—Ç—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
      setTimeout(() => testPageLoad(), 100);
      setTimeout(() => testAuth(), 200);
      setTimeout(() => testStandardLine(), 300);
      setTimeout(() => testEconomyLine(), 400);
      setTimeout(() => testPartitions(), 500);
      setTimeout(() => testWindowsDoors(), 600);
      setTimeout(() => testDelivery(), 700);
      
      setTimeout(() => {
        const successCount = testResults.filter(r => r.type === 'success').length;
        const errorCount = testResults.filter(r => r.type === 'error').length;
        const totalCount = testResults.length;
        
        addResult('fullTest', `üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã: ${successCount} —É—Å–ø–µ—à–Ω–æ, ${errorCount} –æ—à–∏–±–æ–∫ –∏–∑ ${totalCount} —Ç–µ—Å—Ç–æ–≤`, 
                 errorCount === 0 ? 'success' : 'error');
      }, 1000);
    }

    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    window.addEventListener('load', () => {
      // –°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∂–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –≤ iframe
      loadMainCalculator();
    });

    function loadMainCalculator() {
      const iframe = document.createElement('iframe');
      iframe.src = 'index.html';
      iframe.style.display = 'none';
      iframe.onload = () => {
        setTimeout(runFullTest, 1000);
      };
      document.body.appendChild(iframe);
    }
  </script>
</body>
</html>
