<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Проверка ключа Я-Карт</title>

  <!-- Яндекс.Карты: карта + геокодер + подсказки -->
  <script src="https://api-maps.yandex.ru/2.1/?apikey=410a6099-56c9-4669-81c8-f21896edfab0&suggest_apikey=410a6099-56c9-4669-81c8-f21896edfab0&lang=ru_RU&load=package.full,package.suggest" type="text/javascript"></script>

  <style>
    html,body{height:100%;margin:0}
    #map{width:100%;height:100%}
    #addrInput{
      position:absolute;top:10px;left:10px;
      width:300px;padding:6px;font:14px/18px Arial, sans-serif;
      border:1px solid #ccc;border-radius:4px;box-shadow:0 0 4px rgba(0,0,0,.15);
      z-index:1000;
    }
  </style>
</head>
<body>
  <div id="map"></div>

  <script>
    ymaps.ready(() => {
      /* 1. Карта – центр Москвы */
      const map = new ymaps.Map('map', {
        center:[55.751244,37.618423],
        zoom:9
      });

      /* 2. Поле ввода адреса */
      const inp = document.createElement('input');
      inp.id = 'addrInput';
      inp.placeholder = 'Начните вводить адрес…';
      document.body.appendChild(inp);

      /* 3. Подсказки */
      new ymaps.SuggestView(inp, { results:5 });

      /* 4. По клику Enter – геокодируем и летим к точке */
      inp.addEventListener('keydown', async e => {
        if(e.key !== 'Enter') return;
        const val = inp.value.trim();
        if(!val) return;
        try{
          const res = await ymaps.geocode(val, { results:1 });
          const obj = res.geoObjects.get(0);
          if(!obj) return alert('Адрес не найден');
          const coords = obj.geometry.getCoordinates();
          map.setCenter(coords, 14, { duration:300 });
          map.geoObjects.removeAll();
          map.geoObjects.add(new ymaps.Placemark(coords, { balloonContent:val }));
        }catch(err){
          console.error(err);
          alert('Ошибка при геокодировании');
        }
      });
    });
  </script>
</body>
</html>
